$(document).ready(function(){$("input").keypress(function(a){if(a.which==13){return false}})});function configura_ajax(){$.ajax({type:"GET",url:"/simulador_module/simulador_module/simulador",data:"",contentType:"application/json; charset=utf-8",dataType:"json",complete:function(b){var a=JSON.parse(b.responseText);simulador(a)}})}function simulador(h){var c=[50,100,150,200,250,300,400,500];var g=[15,30];var f=[40,45];var a=g.concat(f);if($("#importeMin").length){$("#slider1").slider({animate:"slow",range:"min",stepValues:c,value:c[0],min:c[0],max:c[c.length-1],slide:function(j,k){if($("#slider1").slider("value")<c[c.length-1]&&$("#slider2").slider("value")>=f[0]){$("#slider2").slider("value",g[g.length-1]);b("red")}else{if($("#slider1").slider("value")>=c[c.length-1]&&$("#slider2").slider("value")<f[0]){$("#slider2").slider("value",f[0]);b("transparent")}}d($("#slider1").slider("value"),$("#slider2").slider("value"));var l=$(this).slider("option","stepValues"),n=[],m=$(this).slider("option","max"),i;$.each(l,function(o,p){n[o]=Math.abs(k.value-p);if(n[o]<m){m=n[o];i=o}});if(m){$(this).slider("value",l[i]);return false}},change:function(i,j){if($("#slider1").slider("value")<c[c.length-1]&&$("#slider2").slider("value")>=f[0]){$("#slider2").slider("value",g[g.length-1]);b("red")}else{if($("#slider1").slider("value")>=c[c.length-1]&&$("#slider2").slider("value")<f[0]){$("#slider2").slider("value",f[0]);b("transparent")}}d($("#slider1").slider("value"),$("#slider2").slider("value"))}});$("#slider2").slider({animate:"slow",range:"min",stepValues:a,values:a[0],min:a[0],max:f[f.length-1],slide:function(j,k){if($("#slider2").slider("value")<=g[g.length-1]&&$("#slider1").slider("value")==c[c.length-1]){$("#slider1").slider("value",c[c.length-1-1]);b("red")}else{if($("#slider2").slider("value")>=f[0]&&$("#slider1").slider("value")<c[c.length-1]){$("#slider1").slider("value",c[c.length-1]);b("transparent")}}e($("#slider2").slider("value"));d($("#slider1").slider("value"),$("#slider2").slider("value"));var l=$(this).slider("option","stepValues"),n=[],m=$(this).slider("option","max"),i;$.each(l,function(o,p){n[o]=Math.abs(k.value-p);if(n[o]<m){m=n[o];i=o}});if(m){$(this).slider("value",l[i]);return false}},change:function(i,j){if($("#slider2").slider("value")<=g[g.length-1]&&$("#slider1").slider("value")==c[c.length-1]){$("#slider1").slider("value",c[c.length-1-1]);b("red")}else{if($("#slider2").slider("value")>=f[0]&&$("#slider1").slider("value")<c[c.length-1]){$("#slider1").slider("value",c[c.length-1]);b("transparent")}}e($("#slider2").slider("value"));d($("#slider1").slider("value"),$("#slider2").slider("value"))}});d();e($("#slider2").slider("value"));$("#valorSlider1").change(function(){input1=c[0];for(var j=0;j<(c.length-1);j++){if(this.value>c[j]){input1=c[j+1]}}$("#slider1").slider("value",parseInt(input1));if(input1<c[c.length-1]&&$("#slider2").slider("value")>=f[0]){$("#slider2").slider("value",g[g.length-1]);b("red")}else{if(input1>=c[c.length-1]&&$("#slider2").slider("value")<f[0]){$("#slider2").slider("value",f[0]);b("transparent")}}d()});$("#valorSlider2").change(function(){input2=a[0];for(var j=0;j<(a.length-1);j++){if(this.value>a[j]){input2=a[j+1]}}$("#slider2").slider("value",parseInt(input2));if(input2<=g[g.length-1]&&$("#slider1").slider("value")==c[c.length-1]){$("#slider1").slider("value",c[c.length-1-1]);b("red")}else{if(input2>=f[0]&&$("#slider1").slider("value")<c[c.length-1]){$("#slider1").slider("value",c[c.length-1]);b("transparent")}}d();e($("#slider2").slider("value"))});$("#btnMenosSlider1").click(function(){posSlider1=c.indexOf($("#slider1").slider("value"));if(c[posSlider1]>c[0]){$("#slider1").slider("value",c[posSlider1-1])}if(c[posSlider1-1]<c[c.length-1]&&$("#slider2").slider("value")>=f[0]){$("#slider2").slider("value",g[g.length-1]);b("red")}d()});$("#btnMasSlider1").click(function(){posSlider1=c.indexOf($("#slider1").slider("value"));if(c[posSlider1]<c[c.length-1]){$("#slider1").slider("value",c[posSlider1+1])}if(c[posSlider1+1]>=c[c.length-1]&&$("#slider2").slider("value")<f[0]){$("#slider2").slider("value",f[0]);b("transparent")}d()});$("#btnMenosSlider2").click(function(){posSlider2=a.indexOf($("#slider2").slider("value"));if(a[posSlider2]>a[0]){$("#slider2").slider("value",a[posSlider2-1])}if(a[posSlider2-1]<=g[g.length-1]&&$("#slider1").slider("value")==c[c.length-1]){$("#slider1").slider("value",c[c.length-1-1]);b("red")}d();e($("#slider2").slider("value"))});$("#btnMasSlider2").click(function(){posSlider2=a.indexOf($("#slider2").slider("value"));if(a[posSlider2]<a[a.length-1]){$("#slider2").slider("value",a[posSlider2+1])}if(a[posSlider2+1]>=f[0]&&$("#slider1").slider("value")<c[c.length-1]){$("#slider1").slider("value",c[c.length-1]);b("transparent")}d();e($("#slider2").slider("value"))})}function d(){importe=$("#slider1").slider("value");plazo=$("#slider2").slider("value");if(importe==50&&plazo==15){intereses=29}else{if(importe==50&&plazo==30){intereses=39}else{if(importe==100&&plazo==15){intereses=25}else{if(importe==100&&plazo==30){intereses=40}else{if(importe==150&&plazo==15){intereses=23}else{if(importe==150&&plazo==30){intereses=33}else{if(importe==200&&plazo==15){intereses=22.5}else{if(importe==200&&plazo==30){intereses=32.5}else{if(importe==250&&plazo==15){intereses=22.1}else{if(importe==250&&plazo==30){intereses=32}else{if(importe==300&&plazo==15){intereses=23.2}else{if(importe==300&&plazo==30){intereses=31.5}else{if(importe==400&&plazo==15){intereses=21.3}else{if(importe==400&&plazo==30){intereses=30}else{if(importe==500&&plazo==40){intereses=35}else{if(importe==500&&plazo==45){intereses=38}}}}}}}}}}}}}}}}interes=(importe*intereses/100);total=Math.round(importe+interes);$("#valorDatos1").text(importe);$("#valorDatos4").text(interes);$("#valorDatos5").text(total);$("#valorSlider1").val(importe);$("#valorSlider2").val(plazo);$("#importeSIM").val(importe);$("#interesSIM").val(interes);$("#totalSIM").val(total)}function e(i){fecha=new Date();day=fecha.getDate();month=fecha.getMonth()+1;year=fecha.getFullYear();tiempo=fecha.getTime();milisegundos=parseInt(i*24*60*60*1000);total=fecha.setTime(tiempo+milisegundos);day=fecha.getDate();day=(day<10)?"0"+day:day;month=fecha.getMonth()+1;month=(month<10)?"0"+month:month;year=fecha.getFullYear();$("#valorDatos2").text(day+"/"+month+"/"+year);$("#fecha_vencimientoSIM").val(day+"/"+month+"/"+year);$("#plazoSIM").val(i)}function b(i){$("head").append("<style>#simulador_herramienta #cajaSlider2 .infSlider .slider.ui-widget-content::before{background:"+i+" !important;}</style>")}};